# 4.2.8 Support of non-3GPP access
The following types of non-3GPP access networks are defined:
- Untrusted non-3GPP access networks;
- Trusted non-3GPP access networks; and
- Wireline access networks.
## General Concepts
The 5G Core Network supports connectivity of UEs via non-3GPP access networks, e.g. WLAN access networks.

Supports both untrusted non-3GPP access networks and trusted non-3GPP access networks (TNANs).

An **untrusted non-3GPP** access network **shall be connected** to the 5G Core Network **via a Non-3GPP InterWorking Function (N3IWF)**, via **N2** interface .

An untrusted non-3GPP access network shall be connected to the 5G Core Network via a Non-3GPP InterWorking Function (N3IWF), whereas a trusted non-3GPP access network shall be connected to the 5G Core Network via aTrusted Non-3GPP Gateway Function (TNGF).

A UE shall establish an IPsec tunnel with the N3IWF or with the TNGF in order to register with the 5G Core Network over non-3GPP access. Further details about the UE registration to 5G Core Network over untrusted non-3GPP access and over trusted non-3GPP access are described in clause 4.12.2 and in clause 4.12.2a of TS 23.502, respectively.
# 5.52 QoS differentiation of traffic for Non-3GPP Device Identifier |R19|
## 5.52.1 General
This clause specifies the scenario of a non-3GPP device connecting through the UE. In this scenario QoS differentiation of traffic is applied to the traffic that originates from or is directed to the non-3GPP device. The non-3GPP device does not use NAS and is not authenticated by 5GC.

The support of identification of traffic for non-3GPP devices connecting behind a 5G-RG is specified in [TS 23.316](https://www.tech-invite.com/3m23/tinv-3gpp-23-316.html).

The Non-3GPP Device Identifier is unique within the scope of the UE's SUPI.

In this Release of the specification, QoS differentiation for non-3GPP device connecting behind a UE is not supported in LBO roaming scenario.
## 5.52.2 Traffic Identification
When a non-3GPP device is connecting to the UE, the UE may bind the Non-3GPP Device Identifier to a non-3GPP device, for the traffic of non-3GPP devices that require differentiated QoS. This binding enables the 5G System to distinguish between the traffic generated by different non-3GPP devices connected through the same UE.

> **NOTE 1**
> How the UE identifies the non-3GPP device and binds the Non-3GPP Device Identifier to a non-3GPP device is implementation specific. How the Non-3GPP Device Identifier(s) that are associated with the UE's SUPI in the 5GC are known to the UE is implementation specific.

> **NOTE 2**
> At any point in time the Non-3GPP Device Identifier can be bound to only one non-3GPP device.

Non-3GPP Device Identifier Information is stored in the UDR and includes a Non-3GPP Device Identifier and QoS Information. The content of the Non-3GPP Device Identifier Information is further described in [clause 4.15.6.15 of TS 23.502](https://www.tech-invite.com/3m23/toc/tinv-3gpp-23-502_zzb.html#e-4-15-6-15).
## 5.52.3 Session management enhancement
For the traffic of non-3GPP devices requiring differentiated QoS, the Non-3GPP Device Connection Information may be signalled by the UE as defined in [TS 24.501](https://www.tech-invite.com/3m24/tinv-3gpp-24-501.html). When a non-3GPP device is connected to the UE, the UE may include the Non-3GPP Device Connection Information in PDU Session Modification Request to SMF. The SMF forwards the Non-3GPP Device Connection Information to the PCF for policy control.

> **NOTE 1**
> It is up to UE implementation to determine when to initiate PDU Session Modification procedure for updating the Non-3GPP Device Connection Information.

For an Ethernet PDU Session, the Non-3GPP Device Connection Information includes:
- Non-3GPP Device Identifier;
- MAC address used in PDU session;
- Optionally, VLAN tag ID that is associated with the non-3GPP device used in PDU session.

For an IPv4 or IPv4v6 PDU Session, the Non-3GPP Device Connection Information includes:
- Non-3GPP Device Identifier;
- IPv4 Address associated with the non-3GPP device used in PDU session;
- Optionally, port ranges associated with the non-3GPP device used in PDU session.

For an IPv6 or IPv4v6 PDU Session, the Non-3GPP Device Connection Information includes:
- Non-3GPP Device Identifier;
- IPv6 Address/prefix(sub) associated with the non-3GPP device used in PDU session;
- Optionally, port ranges associated with the non-3GPP device used in PDU session.

> **NOTE 2**
> If IPv4v6 PDU Session is applied, it is up to UE implementation to determine to use IPv4 or IPv6 or both Address/prefix(sub) based on the associated traffic of the non-3GPP device and the IP allocation by the network to the PDU Session

> Editor's note:
> The detailed encoding of Non-3GPP Device Connection Information will be defined in stage-3.

If the PCF indicates to the SMF that the corresponding Non-3GPP Device Identifier is not available for the UE as specified in [clause 6.1.3.31 of TS 23.503](https://www.tech-invite.com/3m23/toc/tinv-3gpp-23-503_j.html#e-6-1-3-31), the SMF rejects the PDU Session Modification with a cause code to notify the UE that the Non-3GPP Device Identifier is not available for the UE.

## 5.52.4 QoS differentiation
QoS differentiation and policy control is defined in [clause 6.1.3.31 of TS 23.503](https://www.tech-invite.com/3m23/toc/tinv-3gpp-23-503_j.html#e-6-1-3-31).